# Інструкція з оновлення проєкту

Цей документ описує покрокову процедуру безпечного оновлення проєкту **Business-card-generator** у виробничому середовищі.

## 1. Підготовка до оновлення

### 1.1. Повідомлення користувачів
За потреби повідомте користувачів про можливий час простою.

### 1.2. Оновлення репозиторію
Перевірте останні зміни у гілці `feature/style`.
Ознайомтесь із release notes (якщо такі є).

## 2. Створення резервних копій

### 2.1. Копія коду
Створіть резервну копію поточного каталогу розгортання:
```
cp -r /var/www/business-card-generator /var/backups/business-card-generator-$(date +%F)
```

### 2.2. Копія конфігурацій
Збережіть `.env` або інші локальні конфігурації окремо.

## 3. Перевірка сумісності

Перевірте сумісність нових версій залежностей у `package.json`.
Якщо використовуються сторонні API — перевірте, чи не змінились їх інтерфейси.

## 4. Планування часу простою (за потреби)

Якщо оновлення порушить доступність сайту — заплануйте виконання в години найменшого навантаження.
Повідомте користувачів про орієнтовний час простою.

## 5. Процес оновлення

### 5.1. Зупинка сервісів (за потреби)
```
sudo systemctl stop nginx
```

### 5.2. Розгортання нового коду
```
cd /var/www/business-card-generator
git pull origin main
npm install
```

### 5.3. Міграція даних (якщо використовується)
Запустіть скрипти міграції, якщо база змінилась.
```
npm run migrate
```

### 5.4. Оновлення конфігурацій
Перевірте `.env` та інші налаштування на предмет змін.

## 6. Перевірка після оновлення

### 6.1. Запуск сервісів
```
sudo systemctl start nginx
```

### 6.2. Тестування вручну
Перевірте завантаження головної сторінки.
Протестуйте базові функції: генерація візитки, форма зворотного зв’язку тощо.

## 7. Процедура відкату (rollback)

### 7.1. Зупинка оновленого сервісу
```
sudo systemctl stop nginx
```

### 7.2. Відновлення коду
```
rm -rf /var/www/business-card-generator
cp -r /var/backups/business-card-generator-2025-18-04 /var/www/business-card-generator
```

### 7.3. Відновлення бази даних (за потреби)
```
psql db_name < /var/backups/db-backup-2025-18-04.sql
```

### 7.4. Запуск попередньої версії
```
sudo systemctl start nginx
```
